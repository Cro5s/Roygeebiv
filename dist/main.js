!function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var r=class{constructor(e=2){this.value=e}color(){switch(this.value){case 2:return"Red";case 4:return"Orange";case 8:return"Yellow";case 16:return"Green";case 32:return"Blue";case 64:return"Indigo";case 128:return"Violet"}}};var s=class{constructor(){this.grid=[[],[],[],[]],this.addRandomSquare(),this.addRandomSquare(),this.change=!1,this.up=this.up,this.down=this.down,this.left=this.left,this.right=this.right}addSquare(e,t,i){this.grid[t][i]=e}full(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(!this.grid[e][t])return!1;return!0}gameOver(){let e=!0;if(e){e=!1;for(let t=0;t<3;t++)for(let i=0;i<3;i++){let r=this.grid[t][i],s=this.grid[t+1][i],n=this.grid[t][i+1];if(2===t){(this.full()&&r.value===s.value||this.full()&&r.value===n.value)&&(e=!0);const t=3;let a=this.grid[t][i],h=this.grid[t][i+1];this.full()&&a.value===h.value&&(e=!0)}else if(2===i){(this.full()&&r.value===s.value||this.full()&&r.value===n.value)&&(e=!0);const i=3;let a=this.grid[t][i],h=this.grid[t+1][i];this.full()&&a.value===h.value&&(e=!0)}else(this.full()&&r.value===s.value||this.full()&&r.value===n.value)&&(e=!0)}}return!(!this.full()||e)}removeSquare(e,t){this.grid[e][t]=void 0}addRandomSquare(){if(!this.gameOver()){let e=Math.floor(4*Math.random()),t=Math.floor(4*Math.random()),i=1*Math.random()>.5?new r:new r(4);for(;this.grid[e][t];)e=Math.floor(4*Math.random()),t=Math.floor(4*Math.random());this.grid[e][t]=i}}up(){this.pushUp(),this.condenseUp(),this.pushUp(),this.change&&(this.addRandomSquare(),this.change=!1)}pushUp(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(this.grid[e][t]){const i=this.grid[e][t];let r=e;for(;r-1>=0&&!this.grid[r-1][t];)this.removeSquare(r,t),this.addSquare(i,r-1,t),this.change=!0,r--}}condenseUp(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(this.grid[e][t]){const i=this.grid[e][t];if(e+1<4&&this.grid[e+1][t]){const r=this.grid[e+1][t];i.value===r.value&&(this.removeSquare(e+1,t),i.value=2*i.value)}}}down(){this.pushDown(),this.condenseDown(),this.pushDown(),this.change&&(this.addRandomSquare(),this.change=!1)}pushDown(){for(let e=3;e>=0;e--)for(let t=0;t<4;t++)if(this.grid[e][t]){const i=this.grid[e][t];let r=e;for(;r+1<4&&!this.grid[r+1][t];)this.removeSquare(r,t),this.addSquare(i,r+1,t),this.change=!0,r++}}condenseDown(){for(let e=3;e>=0;e--)for(let t=0;t<4;t++)if(this.grid[e][t]){const i=this.grid[e][t];if(e-1>=0&&this.grid[e-1][t]){const r=this.grid[e-1][t];i.value===r.value&&(this.removeSquare(e-1,t),i.value=2*i.value)}}}left(){this.pushLeft(),this.condenseLeft(),this.pushLeft(),this.change&&(this.addRandomSquare(),this.change=!1)}pushLeft(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(this.grid[e][t]){const i=this.grid[e][t];let r=t;for(;r-1>=0&&!this.grid[e][r-1];)this.removeSquare(e,r),this.addSquare(i,e,r-1),this.change=!0,r--}}condenseLeft(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(this.grid[e][t]){const i=this.grid[e][t];if(t+1<4&&this.grid[e][t+1]){const r=this.grid[e][t+1];i.value===r.value&&(this.removeSquare(e,t+1),i.value=2*i.value)}}}right(){this.pushRight(),this.condenseRight(),this.pushRight(),this.change&&(this.addRandomSquare(),this.change=!1)}pushRight(){for(let e=0;e<4;e++)for(let t=3;t>=0;t--)if(this.grid[e][t]){const i=this.grid[e][t];let r=t;for(;r+1<4&&!this.grid[e][r+1];)this.removeSquare(e,r),this.addSquare(i,e,r+1),this.change=!0,r++}}condenseRight(){for(let e=0;e<4;e++)for(let t=3;t>=0;t--)if(this.grid[e][t]){const i=this.grid[e][t];if(t-1>=0&&this.grid[e][t-1]){const r=this.grid[e][t-1];i.value===r.value&&(this.removeSquare(e,t-1),i.value=2*i.value)}}}};var n=class{constructor(){this.board=new s,this.grid=[[],[],[],[]],this.createView(),this.keyDownListener(),this.onClickListener(),this.render=this.render.bind(this)}setAttributes(e,t){for(let i in t)e.setAttribute(i,t[i])}keyDownListener(){document.addEventListener("keydown",e=>{if(this.board.gameOver())this.board.gameOver()&&this.endGame();else switch(e.keyCode||e.which){case 38:case 87:this.board.up(),this.render(),this.timeOut();break;case 40:case 83:this.board.down(),this.render(),this.timeOut();break;case 37:case 65:this.board.left(),this.render(),this.timeOut();break;case 39:case 68:this.board.right(),this.render(),this.timeOut();break;default:return}})}timeOut(){setTimeout(()=>this.win(),100)}onClickListener(){document.getElementById("new-game").addEventListener("click",()=>{this.board=new s,this.render()}),document.getElementById("rules").addEventListener("click",()=>{document.querySelector(".game-rules-container").style="display: block"}),document.querySelector(".fa-times-circle").addEventListener("click",()=>{document.querySelector(".game-rules-container").style="display: none"})}endGame(){window.alert("Game Over")}render(){this.grid.forEach((e,t)=>{e.forEach((e,i)=>{let r=this.board.grid[t][i];const s=r?r.color():"",n=r?r.value:0;this.setAttributes(e,{class:s,id:n})})})}win(){document.getElementById(128)&&(this.board.gameOver=!0,window.alert("You Win!"),document.getElementById("new-game").click())}createView(){const e=document.getElementById("game-div"),t=document.createElement("ul");this.setAttributes(t,{class:"view-ul"});for(let e=0;e<4;e++)for(let i=0;i<4;i++){let r=document.createElement("li");this.setAttributes(r,{pos:[e,i]}),this.grid[e][i]=r,t.appendChild(r)}root.appendChild(e),e.appendChild(t)}};document.addEventListener("DOMContentLoaded",()=>{(new n).render()})}]);